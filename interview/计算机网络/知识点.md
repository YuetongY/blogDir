[toc]

# 知识点

## TCP 和 UDP 的区别

1. TCP面向连接（如打电话要先拨号建立连接）;UDP是无连接的，即发送数据之前不需要建立连接

2. TCP提供可靠的服务。也就是说，通过TCP连接传送的数据，无差错，不丢失，不重复，且按序到达;UDP尽最大努力交付，即不保证可靠交付

3. 每一条TCP连接只能是点到点的;UDP支持一对一，一对多，多对一和多对多的交互通信

4. TCP首部开销20字节;UDP的首部开销小，只有8个字节

---

## TCP 三次握手和四次挥手，为什么

- 为什么是两次握手不是三次握手（下面链接里面的答案不对，这里的才是对的）

    三次握手可以防止已经失效的连接请求报文突然又传输到服务器端导致的服务器资源浪费。例如，客户端先发送了一个SYN，但是由于网络阻塞，该SYN数据包在某个节点长期滞留。然后客户端又重传SYN数据包并正确建立TCP连接，然后传输完数据后关闭该连接。该连接释放后失效的SYN数据包才到达服务器端。在二次握手的前提下，服务器端会认为这是客户端发起的又一次请求，然后发送SYN ，并且在服务器端创建socket套接字，一直等待客户端发送数据。但是由于客户端并没有发起新的请求，所以会丢弃服务端的SYN 。此时服务器会一直等待客户端发送数据从而造成资源浪费。 

- [TCP的三次握手与四次挥手理解及面试题（很全面）](https://blog.csdn.net/qq_38950316/article/details/81087809)

---

## TCP如何保证传输的可靠性

- 校验和

- 序列号

- 确认应答

- 超时重传

- 连接管理

- 流量控制

- 拥塞控制

**参考**：[网络基础：TCP协议-如何保证传输可靠性](https://blog.csdn.net/liuchenxia8/article/details/80428157)

---

## TCP的拥塞控制，具体过程是怎么样的？UDP有拥塞控制吗？如何解决

**参考**：[网络基础：TCP协议-如何保证传输可靠性](https://blog.csdn.net/liuchenxia8/article/details/80428157)

---

## session 在服务器上以怎样的形式存在

可以存储在内存中。不过也可以做持久化存储。如：文件、数据库等。

**参考**：[Session是怎么实现的？存储在哪里？](https://blog.csdn.net/qq_15096707/article/details/74012116?utm_source=distribute.pc_relevant.none-task)

---

## Http与Https的区别

1、https协议需要到CA  （Certificate Authority，证书颁发机构）申请证书，一般免费证书较少，因而需要一定费用。

2、http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl加密传输协议。

3、http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。

4、http的连接很简单，是无状态的。Https协议是由SSL+Http协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。

**参考**：[Http和Https的区别（面试常考题）](https://blog.csdn.net/qq_38289815/article/details/80969419)

---

## HTTP状态码分类

- 1**：信息，服务器收到请求，需要请求者继续执行操作

- 2**：成功，操作被成功接收并处理

- 3**：重定向，需要进一步的操作以完成请求

- 4**：客户端错误，请求包含语法错误或无法完成请求

- 5**：服务器错误，服务器在处理请求的过程中发生了错误

---

## Socket 编程

Socket 是一种面向网络的编程方式，它介于应用层和传输层之间。也是计算机网络中用于在节点内发送或接收数据的内部端点。

![image.png](https://ww1.sinaimg.cn/large/006alGmrgy1gch2wvky1pj30o80i678n.jpg)

**参考**：[socket编程到底是什么？](https://www.zhihu.com/question/29637351/answer/534704474)

---

## http 通信过程

1. 建立TCP连接

2. Web浏览器向Web服务器发送请求命令

3. Web服务器应答

4. Web服务器关闭TCP连接

5. 浏览器接受到服务器响应的数据

**总结流程**：

浏览器发起请求-> 解析域名得到ip进行TCP连接 ->浏览器发送HTTP请求和头信息发送->服务器对浏览器进行应答，响应头信息和浏览器所需的内容-> 关闭TCP连接或保持-> 浏览器得到数据数据进行操作

**参考**：

- [一次完整的HTTP请求所经历的步骤](https://www.jianshu.com/p/ae62574f7a99)

- [更完整的 HTTP 通信过程](https://www.cnblogs.com/ghl1024/p/12080532.html)

---

## HTTP 报文格式

1. 请求报文

    HTTP请求报文由**请求行（request line）、请求头（header）、空行和请求体4个部分组成**。

    空行的作用是通知服务器以下不再有请求头。

    请求行中有**请求方法、URL、http 协议版本**

2. 响应报文

    HTTP响应报文和请求报文的结构类似，也是由四个部分组成：**响应行、消息报头、空行、响应体**。

    响应行也由三部分组成：**服务器HTTP协议版本，响应状态码，状态码的文本描述**

**参考**：

- [HTTP报文格式](https://www.cnblogs.com/Mr-mubai/p/11603520.html)

- [Http协议报文格式](https://www.cnblogs.com/jpfss/p/10984966.html)

---

## https 通信过程

一个HTTPS请求实际上包含了两次HTTP传输，可以细分为8步。

1. 客户端向服务器发起HTTPS请求，连接到服务器的443端口

2. 服务器端有一个密钥对，即公钥和私钥，是用来进行非对称加密使用的，服务器端保存着私钥，不能将其泄露，公钥可以发送给任何人。

3. 服务器将自己的公钥发送给客户端。

4. 客户端收到服务器端的公钥之后，会对公钥进行检查，验证其合法性，如果发现发现公钥有问题，那么HTTPS传输就无法继续。严格的说，这里应该是验证服务器发送的数字证书的合法性。如果公钥合格，那么客户端会生成一个随机值，这个随机值就是用于进行对称加密的密钥，我们将该密钥称之为client key，即客户端密钥，这样在概念上和服务器端的密钥容易进行区分。然后用服务器的公钥对客户端密钥进行非对称加密，这样客户端密钥就变成密文了，至此，HTTPS中的第一次HTTP请求结束。

5. 客户端会发起HTTPS中的第二个HTTP请求，将加密之后的客户端密钥发送给服务器。

6. 服务器接收到客户端发来的密文之后，会用自己的私钥对其进行非对称解密，解密之后的明文就是客户端密钥，然后用客户端密钥对数据进行对称加密，这样数据就变成了密文。

7. 然后服务器将加密后的密文发送给客户端。

8. 客户端收到服务器发送来的密文，用客户端密钥对其进行对称解密，得到服务器发送的数据。这样HTTPS中的第二个HTTP请求结束，整个HTTPS传输完成。

![image.png](https://ww1.sinaimg.cn/large/006alGmrgy1gcsphfe9tvj30qq0yi7b9.jpg)

**参考**：

- [Https原理及流程](https://www.jianshu.com/p/14cd2c9d2cd2)

- [HTTPS安全通信过程](https://www.cnblogs.com/xtiger/p/11026870.html)

---
