# 第1章 - 计算机网络和因特网

## 1.3 网络核心

由互联因特网端系统的分组交换机和链路构成的网状网络。

### 1.3.1 分组交换

分组交换是以分组为单位进行传输和交换的，它是一种存储——转发交换方式，即将到达交换机的分组先送到存储器暂时存储和处理，等到相应的输出电路有空闲时再送出。

分组：长报文划分为较小的数据块

两类交换机：路由器和链路层交换机

路由器和链路层交换机的区别：

- 工作层次不同：
    交换机主要工作在数据链路层（第二层）
    路由器工作在网络层（第三层）。

- 转发依据不同：
    交换机转发所依据的对象时：MAC地址。（物理地址）
    路由转发所依据的对象是：IP地址。（网络地址）

- 主要功能不同：
    交换机主要用于组建局域网，
    而路由主要功能是将由交换机组好的局域网相互连接起来，或者接入Internet。
    交换机能做的，路由都能做。
    交换机不能分割广播域，路由可以。
    路由还可以提供防火墙的功能。
    路由配置比交换机复杂。
- 价格不同：
    交换机是看门大爷，路由是邮差。

**优点**：

（1）分组交换不需要为通信双反预先建立一条专用的通信线路，不存在连接建立时延，用户可随时发送分组。

（2）由于采用存储转发方式，加之交换节点具有路径选择，当某条传输线路故障时可选择其他传输线路，提高了传输的可靠性。

（3）通信双反不是固定的战友一条通信线路，而是在不同的时间一段一段地部分占有这条物理通路，因而大大提高了通信线路的利用率。

（4）加速了数据在网络中的传输。因而分组是逐个传输，可以使后一个分组的存储操作与前一个分组的转发操作并行，这种流水线式传输方式减少了传输时间。

（5）分组长度固定，相应的缓冲区的大小也固定，所以简化了交换节点中存储器的管理。

（6）分组较短，出错几率减少，每次重发的数据量也减少，不仅提高了可靠性，也减少了时延。

**缺点**：

（1）由于数据进入交换节点后要经历存储转发这一过程，从而引起的转发时延（包括接受分组、检验正确性、排队、发送时间等），而且网络的通信量越大，造成的时延就越大，实时性较差。

（2）分组交换只适用于数字信号。

（3）分组交换可能出现失序，丢失或重复分组，分组到达目的节点时，对分组按编号进行排序等工作，增加了麻烦。

### 1.3.2 电路交换

电路交换是以电路连接为目的的交换方式，通信之前要在通信双方之间建立一条被双方独占的物理通道。

电路交换网络中，端系统间通信会话期间，预留了端系统间沿路径通信所需要的资源（缓存，链路传输速率）。而在分组交换网络中，这些资源则不是预留的。

**电路交换的三个阶段**：

（1）建立连接 （2）通信 （3）释放连接

**优点**：

（1）由于通信线路为通信双方用户专用，数据直达，所以传输数据的时延非常小。

（2）通信双方之间的屋里通路一旦建立，双方可以随时通信，实时性强。

（3）双方通信时按发送顺序传送数据，不存在失序问题。

（4）电路交换既适用于传输模拟信号，也适用于传输数字信号。

（5）电路交换的交换设备及控制均比较简单。

**缺点**：

（1）电路交换平均连接建立时间对计算机通信来说较长。

（2）电路交换家里连接后，物理通路被通信双方独占，即使通信线路空闲，也不能供其他用户使用，因而信道利用率低。

（3）电路交换时，数据直达，不同类型，不同规格，不同速率的终端很难相互进行通信，也难以在通信过程中进行差错控制。

**电路交换举例**：

![image.png](http://ww1.sinaimg.cn/large/006alGmrgy1g9i5sv422jj30jb08taaz.jpg)

==综上，若传输的数据量很大，而且传送时间远大于呼叫时间，则采用电路交换较为合适；当端到端的通路有很多段链路组成是，采用分组交换较为合适。从提高整个网络的信道利用率上看，分组交换优于电路交换。==

**参考**：[电路交换与分组交换的区别](https://blog.csdn.net/liuqiyao_01/article/details/39001067)

## 1.5 协议层次及其服务模型

### 1.5.1 分层的体系结构

#### 1.5.1.1 协议分层

因特网的协议栈由5个层次组成：物理层、链路层、网络层、传输层和应用层

1. 应用层：是网络应用程序及他们的应用层协议存留的地方。提供了主机之间的逻辑通信。应用层协议包括：HTTP、SMTP、FTP、DNS 等。位于应用层的信息分组称为`报文`

2. 运输层：为运行在不同主机上的应用进程之间提供了逻辑通信功能，在端系统中，运输层协议将来自应用进程的报文移动到网络边缘（即网络层）。主要协议包括：TCP 和 UDP。其分组称为`报文段`

3. 网络层（IP 层）：网络层负责将称为`数据报`的网络层分组从一台主机移动到另一台主机。协议有：网际协议 IP 和 路由选择协议等

4. 链路层：一个数据报可能呗沿途不同链路上的不同链路层协议处理。协议有：DOCSIS 等。分组为 `帧`

5. 物理层：将帧中的一个个比特从一个节点移动到下一个节点。以太网具有许多物理层协议：与双绞铜线、同轴电缆、光纤等有关。在每种场合中，跨越这些链路移动的比特是以不同的方式进行的。

#### 1.5.1.2 OSI 模型

一共有7层，分别是：应用层、表示层、会话层、传输层、网络层、链路层和物理层

### 1.5.2 封装

![2](http://ww1.sinaimg.cn/large/006alGmrly1g2qskuf0aqj317q0r14hu.jpg)