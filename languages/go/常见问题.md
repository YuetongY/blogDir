# 常见问题

## 1. 将 geth 工程文件导入 GoLand 之后出现 `cannot find package` 错误

![2](http://ww1.sinaimg.cn/large/006alGmrgy1g14tg0plp6j312k0f9jug.jpg)

**解决方法**：在主目录 `github.com` 下新建一个 `src` 目录，然后将除 `src` 在内的整个工程 copy 至 src 中

![2](http://ww1.sinaimg.cn/large/006alGmrgy1g14tlgl0hoj30ml0hv40b.jpg)

## 2. if 和 for 中变量作用域问题

```go
package main

import (
	"fmt"
	"math"
)

func pow(x, n, lim float64) float64 {
	if v := math.Pow(x, n); v < lim {
		return v
	}
	return lim
}

func main() {
	fmt.Println(
		pow(3, 2, 10),
		pow(3, 3, 20),
	)
}
```

pow 方法中如果 return v 则会报错，因为 v 的作用域范围仅在 if 条件块中

for 中情况一样

## 3. 数组无法使用 array[:]

```go
primes := [6]int{2, 3, 5, 7, 11, 13}
primes = primes[0:1]
```

## 4. 切片相关问题

更改切片的元素会修改其底层数组中对应的元素。与它共享底层数组的切片都会观测到这些修改

```go
func main() {
	s := []int{2, 3, 5, 7, 11, 13}
	printSlice(s)   //输出[2 3 5 7 11 13]

	// 截取切片使其长度为 0
	s = s[:0]
	printSlice(s) //输出[]

	// 拓展其长度
	s = s[:4]
	printSlice(s)   //输出[2 3 5 7]

	printSlice(s[:])   //输出[2 3 5 7]
	
	printSlice(s[2:])   //输出[5 7]
	
	// 舍弃前两个值
	s = s[4:]   //输出[]
	printSlice(s)
	t := s[4]   //报错索引下标越界,index out of range
	fmt.Println(t)
	s = s[5:]   //报错,slice bounds out of range
	printSlice(s)
}

func printSlice(s []int) {
	fmt.Printf("len=%d cap=%d %v\n", len(s), cap(s), s)
}
```

**参考**:[切片的长度与容量](https://tour.go-zh.org/moretypes/11)

切片的零值是 nil

---

## 5. Invalid array bound, must be a constant expression

声明或初始化数组时，无法用变量指定数组的长度

以下语句会报如小标题错误

```go
lenght := 9
stack := [lenght]uint8{}
```

---