# 知识点

## Webhooks/web 钩子

`webhook是在特定情况下触发的一种api（回调），用于在项目发生相关事件时通知外部服务器。这些回调由第三方的用户、开发人员自己定义、维护、管理，就好像允许别人挂载一条网线到你的Web网站或者应用程序的钩子上，来实时地收到你的推送信息`

比方说我的网站有一个api `http://dev.lovelucy.info/incoming`，负责接受一个 Post 请求。每次有push 事件时 GitHub 都会主动往这个地址发送一个 POST 请求。当然 GitHub 还有个 Secret 的设定，就是一个字符串，如果加上的话就在 POST 请求的 HTTP 头中会带一个 Hash 值做验证密文，证明这个 POST 真是来自 GitHub。

再比方，在js中，target.addEventListener(type, listener[, options]);可以为一个节点添加一个事件，如：

```js
document.getElementById("myBtn").addEventListener("click", function(){
    document.getElementById("demo").innerHTML = "Hello World";
});
```

在点击myBtn按钮时候，会触发点击事件。同理webhook也是如此，在git操作中使用频繁。

![image.png](http://ww1.sinaimg.cn/large/006alGmrgy1gasdo0kz3uj30pe0jwjtw.jpg)

![image.png](http://ww1.sinaimg.cn/large/006alGmrgy1gasdoikbhoj30lq0c8q3s.jpg)

**Webhook 处理管道**：

![image.png](http://ww1.sinaimg.cn/large/006alGmrgy1gasdhum1e5j30jp092my2.jpg)

其中 DropBox、PayPal、Github、Slack都是第三方平台，这些平台接受到某些 HTTP 请求后，触发 Web Hook 发送新的 HTTP 请求到 Your Web Site， Your Web Site 收到来自第三方平台的 HTTP 请求后再进行自己的业务处理

**例子**：我的系统属于后台接口系统。每次我开发提交完git仓库后要实时的部署到测试环境，这时候就可以用到gitlab或github的web hooks进行自动更新部署。当我push代码后，触发 gitlab/github 的 web hook 发送 post 请求到我的后台接口系统，后台接口系统接收到该 post 请求后就开始进行更新部署。

**参考**：

- [钩子(hooks)—webhook-使用钩子自动触发部署](https://blog.csdn.net/feng98ren/article/details/81737287)

- [WebHooks - Web钩子](http://www.mamicode.com/info-detail-2257739.html)

- [了解Webhooks](https://blog.csdn.net/tengxing007/article/details/78749381)

---

## Swagger

`Swagger 是一个规范和完整的框架，用于生成、描述、调用和可视化 RESTful 风格的 Web 服务。允许接口文档在线自动生成，以及功能测试。总体目标是使客户端和作为服务器的文件系统以同样的速度来更新。文件的方法，参数和模型紧密集成到服务器端的代码，允许API来始终保持同步。`

通过将相关的信息存储在它定义的描述文件里面(yml或json格式)，然后维护这个描述文件可以去更新接口文档，以及生成各端代码。而java 中的 Springfox-swagger，则可以通过扫描代码去生成这个描述文件，连描述文件都不需要再去维护了。所有的信息，都在代码里面了。代码即接口文档，接口文档即代码。

比方 gitea 集成 Swagger 生成的 gitea API。[https://try.gitea.io/api/swagger](https://try.gitea.io/api/swagger)

**参考**：

- [Swagger](https://www.jianshu.com/p/a0caf58b3653)

- [swagger是什么](https://www.yunqishi.net/dnjc/dnzx/35732.html)

- [Swagger介绍及使用](https://www.jianshu.com/p/349e130e40d5)

---
