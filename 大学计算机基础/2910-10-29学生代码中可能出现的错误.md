# 学生代码中可能出现的错误

## 1. 计算机问题求解之基础篇 - 第1关 Eratosthenes 筛子 - 第一题

**问题描述**：

素数在人类科学史上有着很重要的地位和悠长的历史，公元前200年左右，古希腊、波斯和中国的哲学家就开始研究素数的性质。直到20世纪中叶，素数仍只是数论关心的话题。1970年新的加密算法——RSA算法的提出，为素数找到了新的应用，如何产生大素数成为新的研究热点。至2013年2月，能找到的最大素数是$2^{57885161}-1$ ，有17425170个数字。

公元前250年，古希腊数学家Eratosthenes提出了一种筛选n以内所有素数的简便方法，其中n为非负整数：

1. 构造一个从2到n的整数序列；
2. 重复下述动作：
    - 剩下的序列中第一个数是素数
    - 划去序列中最近找出来的该素数的倍数

请在指定位置编写程序，完成函数，实现上述Eratosthenes筛子算法。
提示：用list来存放最初的数列，以及最终的结果。

**错误代码版本1：**

```python
def sieve(n):
    if n < 2:
        return []
    results = list(range(2, n + 1))
    for value in results:
        i = 2
        while i * value <= n:
            results.pop(i * value)
            i += 1
    return results
```

![image.png](https://ws1.sinaimg.cn/large/006alGmrly1g8fc5i5gmyj308i03vq2t.jpg)

==错误原因：== `list.pop()` 根据元素下标移除元素，不是根据元素值

**错误代码版本2：**

```python
def sieve(n):
    if n < 2:
        return []
    results = list(range(2, n + 1))
    for value in results:
        i = 2
        while i * value <= n:
            results.remove(i * value)
            i += 1
    return results
```

![image.png](https://ws1.sinaimg.cn/large/006alGmrly1g8fc6to4o8j30bx05rjrc.jpg)

==错误原因：== 重复移除元素，没有添加判断条件

**正确代码**：

```python
def sieve(n):
    if n < 2:
        return []
    results = list(range(2, n + 1))
    for value in results:
        i = 2
        while i * value <= n:
            if (i * value) in results:
                results.remove(i * value)
            i += 1
    return results
```

## 2. Python 控制结构（二） - 第3关：函数基础实训 - 第二题

**问题描述**：

在指定位置编写代码，实现一个函数，功能是根据输入的整数n（n不小于0），计算并返回n的阶乘。

如果n不合法，输出None。

**错误代码版本1：**

```python
def factorial(n):
    if n >= 0:
        for i in range(1, n):
            fac *= i
    else:
        fac = None
    return fac
```

![image.png](https://ws1.sinaimg.cn/large/006alGmrly1g8fcjm8bowj30d105ydfs.jpg)

==错误原因：== 变量在没有定义之前就引用

**错误代码版本2：**

```python
def factorial(n):
    fac = 1
    if n >= 0:
        for i in range(1, n):
            fac *= i
    else:
        fac = None
    return fac
```

![image.png](https://ws1.sinaimg.cn/large/006alGmrly1g8fclra03fj30cw05ua9y.jpg)

==错误原因：== range() 函数遍历不包括 n

**正确代码**：

```python
def factorial(n):
    fac = 1
    if n >= 0:
        for i in range(1, n+1):
            fac *= i
    else:
        fac = None
    return fac
```
