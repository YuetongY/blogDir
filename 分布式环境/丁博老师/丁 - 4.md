# 丁博老师 第4章 Part2:原理 第二讲:面向过程的分布式计算环境

面向过程的分布式计算环境以支持远程过程调用为核心特点

## 1. 概念内涵

### 1.1 套接字编程的问题

- 套接字的出现
    1. 促进了软件从单机环境向网络环境的发展
    2. 扩展了软件的应用范围
- 人们很快不满足于直接基于套接字的编程
    1. 基于套接字的开发方式较为繁琐
    2. 软件的排错十分困难
    3. 特别是当服务器端需要根据用户的不同请求内容区分不同的处理过程时
- 是否存在其它更为直观的编程方式?
    1. 例如直接调用远程计算机上进程所提供的方法?
        远程过程调用(Remote Procedure Call)

### 1.2 远程过程调用

- 远程过程调用:过程式程序设计范型在分布式系统中的扩展
    1. 客户(即请求方)与服务器位于不同的内存地址空间内,服务器所能提供的操作以过程的形式定义;
    2. 在分布式计算环境的支持下,客户可以像调用本地过程一样调用服务器上的过程,而无需为这一过程中的跨网络交互显式编写程序。

## 2. 基本原理

## 3. 设计进阶

### 3.1 如何找到远程服务器

- 给定地址
    1. 至少包含套接字地址+过程标识
    2. 例如corbaloc://192.167.1.1:5432/sayHello
- 引入名字服务
    1. 集中维护资源,通过名字定位资源

### 3.2 如何跨平台和语言

- 如何跨语言
    1. 引入具体编程语言无关的IDL(Interface Definition Language接口定义语言)
    2. 由IDL映射生成客户方stub和服务方skeleton

- 如何跨平台
    1. 解决方案:引入平台无关消息协议,实现外部数据表示。XDR、GIOP、XML、JSON RPC...

### 3.3 如何应对分布性所带来的挑战

- 网络不可控性
    1. 例如:网络可能断开,可能被攻击
- 远端不可控性
    1. 例如:服务方可能不返回,客户方可能同时多个在线

![2](http://ww1.sinaimg.cn/large/006alGmrgy1g4nvp69e20j318c0psjuq.jpg)

- 恰当的网络异常处理

- 健壮性与安全性
    1. 抗恶劣网络环境
    2. 抗攻击

## 4. 案例剖析

## 4.1 DCE Distributed Computing Environment

- OSF (Open Software Foundation)

## 4.2 Apache Thrift

- Facebook早期框架
    1. LAMP:Linux, Apache, MySQL, PHP

- Thrift:面向跨语言可伸缩服务开发的RPC框架
    1. 2007年开源,2008年5月进入Apache孵化器
    2. 支持多种编程语言
        - C++, Java, Python, PHP, Ruby, Erlang, Perl, Haskell, C#, Cocoa,JavaScript, Node.js, Smalltalk, Ocaml,Delphi...
    3. 支持多种传输协议和传输方式
    4. 被广泛应用于云计算和互联网公司
        - Facebook、Evernote、UberPinterest、美团、小米...
