# 丁博老师 第5章 Part2:原理 第四讲:面向构件/服务的 分布式计算环境

## 1. 面向构件的分布计算环境

### 1.1 构件起源

- 工业大型系统都是由“构件”组装而成的
- 实现复用、分工、市场竞争
- 能否以类似方式构建大型软件系统?

### 1.2 构件的定义

软件构件是一种组装单元,它具有规范的接口规约和显式的语境依赖。软件构件可以被独立地部署并由第三方任意的组装。

![2](http://ww1.sinaimg.cn/large/006alGmrgy1g4onyb2554j30z70jd41n.jpg)

### 1.3 分布式构件

- 分布式构件=构件+分布式应用支持
    1. 在分布计算平台技术基础上,通过制定广泛为业界认可的分布式应用开发和运行规范,大量利用代码自动生成工具和运行维护工具,以辅助构造出完整的服务器端分布式应用
- 提高服务器端应用的开发质量和开发效率
- 增强所开发分布式应用的可管理性和可集成性

### 1.4 面向构件的分布计算环境

- 关键技术一:构件动态装载
    1. 构件被打包成操作系统或语言可动态装载的模块

- 关键技术二:构件运行时管理
    1. 生命周期管理、构件依赖关系管理

- 关键技术三:构件远程访问支持
    1. 基于远程对象或远程过程调用机制
- 关键技术四:构件远程部署和配置
    1. 构件可以通过部署工具安装在网络上的一个或多个目标服务器上
    2. 构件具有外界可定制的属性,通过相关的属性浏览器或配置工具,可以在构件运行前对这些属性值进行设置或修改
- 关键技术五:面向服务端构件的公共支撑
    1. 事务处理、安全机制、并发机制、系统集成支持

### 1.5 案例:EJB（Enterprise Java Bean）构件模型

- JEE中用于构筑企业应用服务器端可被管理构件的规范

- 从Java Bean谈起
    1. 与Java语言同年发布,最初为Java GUI的可视化编程设计
    2. 符合特定规范的类,从而方便其它人调用
        - 类是public的,有一个public的默认无参数构造器
        - 属性是private的,使用get,set方法访问
        - 可以序列化/反序列化(即状态保存和恢复)

- 将JavaBean应用到服务端(JSP Model1)

- 模型-视图-控制器(MVC)
    1. 控制器 - 控制应用程序流程,处理事件并作出响应
    2. 视图 - 图形界面,实现数据展示
    3. 模型 – 具体的领域业务逻辑和数据持久

- JavaBean vs. EJB

![2](http://ww1.sinaimg.cn/large/006alGmrgy1g4oo7nfncbj313c0hxq67.jpg)

- Spring Bean
    1. 轻量级容器
        - IoC控制反转、生命周期管理
    2. 其它公共服务采用可选方案
        - Hibernate持久化、JMS消息传递...

### 1.6 反思:构件的真正力量

- 为什么没有形成真正的构件市场,实现大规模的构件重用?

    1. 软件的行为很难仅通过良定义的接口理解
    2. 传统软件开发交付的是“蓝图”,而非产品实例
    3. 软件的需求和外部依赖是持续变化的

- “基层构件+元层容器”体系结构
    1. 构件提供规范化的管理接口
    2. 对构件及构件间关系进行运行时管理
        - 实现动态部署和在线调整

## 2. 面向服务的分布计算环境

通过连接能完成特定任务的独立功能实体,实现网络环
境下业务功能集成的一种软件系统架构

### 2.1 SOA(Service Oriented Architecture)的组成

- 服务提供者
    1. 一个可通过网络寻址的实体,接受和执行来自使用者的请求。
    2. 将自己的服务和接口契约发布到服务注册中心
- 服务使用者
    1. 一个应用程序、一个软件模块或另一个服务
    2. 它发起对注册中心中的服务的查询,调用服务提供者功能
    3. 服务使用者根据接口契约来执行服务
- 服务注册中心
    1. 服务发现的支持者,包含可用服务列表
    2. 允许服务使用者查找服务提供者

### 2.2 服务和构件的区别和联系

- 具有较高的抽象级别
- 更大的粒度
- 更强的独立性与可用性
- 更加便于使用者直接使用

### 2.3 SOA概念的新颖之处

- 接口与实现分离
    1. 早已在JEE、CORBA、COM甚至DCE中得到充分检验
    2. 通过文本来实现服务与其执行环境的分离,而且分离得更明确、更完全
- SOA的真正优点体现业务集成
    1. 通过组合现有服务来开发整个或近乎整个新应用
- 一种理念
    1. 正确的企业意识,如何组织自己的IT能力
    2. 业务驱动服务,服务驱动技术
    3. SOA只是实现业务需求的工具,企业应用部署应该从业务角度考虑而不是技术角度考虑SOA
- 一种方法
    1. 利用服务支持企业数据资产和应用互操作

### 2.4 案例:企业服务总线

- 关键组件
    1. 面向消息的中间件
        - 鲁棒, 可靠传输
        - 通过抽象数据通道的数据高效流动
        - 端到端可靠性
    2. 服务容器和抽象端点
        - 端点:逻辑抽象,代表远程服务各种实现
        - 容器:端点的物理实现,分布式和轻量级的
    3. 智能路由
        - 根据内容和上下文的消息路由
        - 根据业务流程规则的消息路由
        - 基于BPEL4WS规则语言的业务流程编排
    4. 协议转换
    